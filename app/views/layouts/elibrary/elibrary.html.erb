<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>MOH | eLibrary &#174;</title>
  <%= csrf_meta_tags %>
  <%= favicon_link_tag 'moh-icon.png' %>
  <!-- Propshaft stylesheets -->
  <%= stylesheet_link_tag 'application.css', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= stylesheet_link_tag 'elibrary.css', media: 'all', 'data-turbolinks-track': 'reload' %>
  
  <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
</head>
<body class="theme-blue navbar-fixed sidebar-fixed footer-fixed">
<div class="all-content-wrapper">
  <header>
    <nav class="navbar">
      <div class="container-fluid">
        <div class="navbar-left">
          <a href="#"
             class="toggle-left-sidebar"
             data-action="click->sidebar#toggle">
            <span data-sidebar-target="toggleIcon">
              <%= tabler_icon "menu-2", size: "20px" %>
            </span>
          </a>
          <%= link_to root_path, class: 'navbar-brand' do %>
            <span class="logo-minimized"><%= image_tag "moh-logo.png", width: "30" %></span>
            <span class="logo"> <%= image_tag "moh-logo.png", width: "30" %> 
            MOH </span>
          <% end %>
        </div>
        <div class="navbar-center">
          <form action="<%= search_path %>" method="get">
            <input type="hidden" name="model" value="document">
            <div class="position-relative" style="display: inline-block; width: 100%;">
              <!-- Updated search icon with Tabler -->
              <span class="position-absolute" style="left: 15px; top: 50%; transform: translateY(-50%); z-index: 10;">
                <%= tabler_icon "search", size: "16px" %>
              </span>
              <input type="text" class="form-control form-control-search" name="query" placeholder="Search e-Library..." style="padding-left: 40px; padding-right: 50px; width: 100%;">
              
              <a href="<%= search_elibrary_documents_path %>" class="position-absolute advanced-search-btn" style="right: 5px; top: 50%; transform: translateY(-50%); border: none; background: transparent; width: 38px; height: 38px; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none;">
                <!-- Updated sliders icon with Tabler -->
                <%= tabler_icon "adjustments-horizontal", size: "16px" %>
              </a>
            </div>
          </form>
        </div>
        <div class="navbar-right">
          <ul class="nav navbar-nav">
            <%= render partial: 'menus/top_menu/user' %>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  
  <!-- Updated sidebar with Stimulus -->
<aside class="sidebar"
       data-controller="sidebar"
       data-sidebar-target="sidebar"
       data-action="click->sidebar#closeOnOutsideClick keydown@window->sidebar#closeOnEscape">
    <nav class="sidebar-icons-nav">
      <ul class="iconsmenu">
        <%= render partial: 'menus/compact_menu/application' %>
      </ul>
    </nav>
    <nav class="sidebar-nav">
      <ul class="metismenu">
        <br>
        <%= render partial: "menus/metis_menu/elibrary/menus" %>
      </ul>
    </nav>
  </aside>
  
  <div class="dashboard-heading">
    <div class="dashboard-heading__content">
      <h4 class="dashboard-heading__title">

        <%= link_to elibrary_path, class: "dashboard-heading__link" do %>
          <div class="d-flex align-items-center justify-content-center round-30 rounded bg-primary-elibrary flex-shrink-0">
            <!-- Updated with Tabler icon or keep your SVG -->
            <%= tabler_icon "books", size: "20px" %>
          </div>
          <span>eLibrary</span>
        <% end %>
        <%= link_to new_elibrary_document_path, class: "btn btn-rounded btn-outline btn-default" do %>
          <!-- Updated upload icon with Tabler -->
          <%= tabler_icon "upload", size: "16px" %>
        <% end %>
      </h4>
      
      <div class="dashboard-heading__actions">
        <!-- Actions here -->
      </div>
    </div>
  </div>
  
  <section class="content">
    <div class="page-body">
      <%= render partial: 'shared/flash_messages' %>
      <%= yield :header %>

      <div class="panel panel-default">
        <%= yield %>
      </div>
    </div>
  </section>
  
  <footer>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4">
          &copy; <%= Date.today.year %> <font color="#777"><b>MOH ICT - Ethiopia</b></font>.
        </div>
        <div class="col-xs-4"> 
          <center><font style="color: transparent !important;">IN GOD I TRUST !</font></center>
        </div>
        <div class="col-sm-4 align-right">
          <font style="color: transparent !important;">Alemat G. Michael</font>
        </div>
      </div>
    </div>
  </footer>
</div>
<div id="loading-bar"></div>
</body>
</html>